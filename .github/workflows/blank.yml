name: Debug CPI iFlows

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v3

    - name: Fetch iFlow List
      run: |
        echo "Fetching iFlows..."
        curl -u "${{ secrets.CPI_USERNAME }}:${{ secrets.CPI_PASSWORD }}" \
        "${{ secrets.CPI_TENANT }}/itspaces/odata/api/v1/IntegrationDesigntimeArtifacts" \
        -o iflows.xml

    - name: Show iFlows XML
      run: |
        echo "------ iflows.xml content ------"
        cat iflows.xml
        echo "--------------------------------"






